{"version":3,"file":"bundle.esm.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const deepCopy = (obj?: any): typeof obj => {\n  if (Array.isArray(obj)) {\n    return obj.map((_obj) => deepCopy(_obj));\n  }\n\n  if (obj && typeof obj === \"object\") {\n    return Object.fromEntries(\n      Object.entries(obj).map(([k, v]) => [k, deepCopy(v)])\n    );\n  }\n\n  return obj;\n};\n","import { deepCopy } from \"./utils\";\n\nexport type ActionType<AT, K = string | number> = {\n  id: K;\n  payload: AT;\n};\n\nexport type ReducerType<S, AT> = (\n  currentState: S,\n  action: AT\n) => typeof currentState;\n\nexport class Store<T, U> {\n  private _state: T;\n  private _reducer: ReducerType<T, U>;\n\n  constructor(reducer: ReducerType<T, U>, initState: T) {\n    this._state = initState;\n    this._reducer = reducer;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  dispatch(action: U) {\n    const stateCopy = deepCopy(this._state);\n    this._state = this._reducer(stateCopy, action);\n  }\n}\n\nexport const createStore = <T, U>(reducer: ReducerType<T, U>, initState: T) =>\n  new Store<T, U>(reducer, initState);\n"],"names":[],"mappings":"AAAA;AACO,IAAM,QAAQ,GAAG,UAAC,GAAS,EAAA;AAChC,IAAA,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACtB,QAAA,OAAO,GAAG,CAAC,GAAG,CAAC,UAAC,IAAI,EAAA,EAAK,OAAA,QAAQ,CAAC,IAAI,CAAC,CAAd,EAAc,CAAC,CAAC;KAC1C;AAED,IAAA,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AAClC,QAAA,OAAO,MAAM,CAAC,WAAW,CACvB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,EAAM,EAAA;gBAAL,CAAC,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,CAAC,GAAA,EAAA,CAAA,CAAA,CAAA,CAAA;AAAM,YAAA,OAAA,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;SAAA,CAAC,CACtD,CAAC;KACH;AAED,IAAA,OAAO,GAAG,CAAC;AACb,CAAC;;ACDD,IAAA,KAAA,kBAAA,YAAA;IAIE,SAAY,KAAA,CAAA,OAA0B,EAAE,SAAY,EAAA;AAClD,QAAA,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;KACzB;AAED,IAAA,MAAA,CAAA,cAAA,CAAI,KAAK,CAAA,SAAA,EAAA,OAAA,EAAA;AAAT,QAAA,GAAA,EAAA,YAAA;YACE,OAAO,IAAI,CAAC,MAAM,CAAC;SACpB;;;AAAA,KAAA,CAAA,CAAA;IAED,KAAQ,CAAA,SAAA,CAAA,QAAA,GAAR,UAAS,MAAS,EAAA;QAChB,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;KAChD,CAAA;IACH,OAAC,KAAA,CAAA;AAAD,CAAC,EAAA,EAAA;AAEY,IAAA,WAAW,GAAG,UAAO,OAA0B,EAAE,SAAY,EAAA;AACxE,IAAA,OAAA,IAAI,KAAK,CAAO,OAAO,EAAE,SAAS,CAAC,CAAA;AAAnC;;;;"}